<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd">

	<!-- Parser -->
	<bean id="webClientFactory" class="com.cee.news.parser.net.impl.DefaultWebClientFactory" scope="prototype">
		<property name="httpClientFactory">
		    <bean class="com.cee.news.parser.net.impl.DefaultHttpClientFactory" />
		</property>
		<property name="readerFactory">
			<bean class="com.cee.news.parser.net.impl.XmlStreamReaderFactory" />
		</property>
	</bean>
	
	<bean id="languageDetector" class="com.cee.news.language.impl.DelegatingLanguageDetector">
	   <property name="detectors">
	       <list>
	           <bean class="com.cee.news.language.impl.FeedLanguageDetector" />
	       </list>
	   </property>
	</bean>
	
	<bean id="xmlReaderFactory" class="com.cee.news.parser.impl.TagsoupXmlReaderFactory" />
	
	<bean id="articleParser" class="com.cee.news.parser.impl.BoilerpipeArticleParser" scope="prototype">
		<property name="xmlReaderFactory" ref="xmlReaderFactory"/>
	</bean>
	
	<bean id="feedParser" class="com.cee.news.parser.impl.RomeFeedParser" scope="prototype">
		<property name="xmlReaderFactory" ref="xmlReaderFactory" />
	</bean>
    
    <bean id="siteParser" class="com.cee.news.parser.impl.SiteParserImpl" scope="prototype">
        <property name="xmlReaderFactory" ref="xmlReaderFactory" />
    </bean>
    
    <bean id="articleReader" class="com.cee.news.parser.impl.ArticleReader" scope="prototype">
        <property name="articleParser" ref="articleParser" />
    </bean>
    
	<bean id="siteReader" class="com.cee.news.parser.impl.SiteReader" scope="prototype">
		<property name="articleReader" ref="articleReader" />
		<property name="feedParser" ref="feedParser" />
		<property name="languageDetector" ref="languageDetector" />
		<property name="siteParser" ref="siteParser" />
		<property name="store" ref="articleStore" />
	</bean>

    <bean id="templateCache" class="com.cee.news.highlighter.impl.TemplateCache" scope="prototype">
        <property name="readerFactory">
            <bean class="com.cee.news.parser.net.impl.XmlStreamReaderFactory" />
        </property>
    </bean>
	
    <bean id="contentHighlighter" class="com.cee.news.highlighter.impl.ContentHighlighterImpl" scope="prototype">
        <property name="xmlReaderFactory" ref="xmlReaderFactory" />
        <property name="articleReader" ref="articleReader" />
        <property name="templateCache" ref="templateCache" />
    </bean>
</beans>